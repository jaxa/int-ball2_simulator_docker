%% Int‑Ball2 Simulator Architecture Diagram
%% Render with GitHub or VS Code — Mermaid preview is supported

flowchart TD
    %% Host machine
    subgraph host["Host Machine"]
        engine["Docker Engine"]
    end

    %% Simulator container (privileged)
    subgraph sim["Simulator Container (ib2_simulator)"]
        sim_ros["platform_gui(GSE)"]
        sim_gui["platform_sim_tools(RViz+Gazebo)"]
    end

    %% User‑program container (spawned via DooD)
    subgraph user["User Program Container (ib2_user)"]
        user_ros["ROS Nodes / User Control Logic"]
    end

    %% Connections
    engine -- "/var/run/docker.sock mount" --> sim
    sim -- "docker API" --> engine
    sim_ros -- "docker run" --> user

    sim_gui --> sim_ros

    %% Shared volumes
    host ---|"shared_data_sim volume"| sim



